---
import "swiper/css";
import "swiper/css/pagination";

export interface Props {
    images: string[];
}

const { images } = Astro.props;

const fullImages = images.map((image) => {
    return image.startsWith("http")
        ? image
        : `${import.meta.env.PUBLIC_URL}/images/products/${image}`;
});
---

<div>
    <div class="swiper">
        <div class="swiper-wrapper">
            {
                fullImages.map((image, index) => (
                    <div class="swiper-slide">
                        <img
                            src={image}
                            alt={`Imagen ${index}`}
                            class="w-full h-full object-cover px-10"
                        />
                    </div>
                ))
            }
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-scrollbar"></div>
    </div>
</div>
<script>
    import Swiper from "swiper";
    import { Pagination, Scrollbar } from "swiper/modules";

    document.addEventListener("astro:page-load", () => {
        const swiper = new Swiper(".swiper", {
            modules: [Pagination, Scrollbar],
            pagination: {
                el: ".swiper-pagination",
            },
            scrollbar: {
                el: ".swiper-scrollbar",
            },
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
        });
    });
</script>

<style>
    .swiper {
        width: 100%;
        height: 600px;
    }
</style>
